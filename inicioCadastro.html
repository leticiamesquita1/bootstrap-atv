<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Clientes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
<style>
   
</style>
</head>
<body>

    <nav class="navbar navbar-expand-lg" style="background-color: #e3f2fd;font-family: 'Courier New', Courier, monospace;">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="inicioCadastro.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="catalogo.html">Catálogo</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" aria-disabled="true" href="teste.html">Teste</a>
                    </li>
                </ul>
            </div>
            <a href="ajuda.html">
            <button class="btn chat-left-dots-btn" id="chatButton">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-chat-dots" viewBox="0 0 16 16">
                    <path d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
                    <path d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9 9 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.4 10.4 0 0 1-.524 2.318l-.003.011a11 11 0 0 1-.244.637c-.079.186.074.394.273.362a22 22 0 0 0 .693-.125m.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6-3.004 6-7 6a8 8 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a11 11 0 0 0 .398-2"/>
                  </svg>
         </button>
        </a>
            <a href="login.html">
                <button class="btn bi-person-btn" id="personButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
                      </svg>
                </button>
            </a>

        </div>
    </nav>

    <div class="container">
    <h1 class="text-center mt-5" style="background-color: #e3f2fd;border-radius: 15px;font-family: 'Courier New', Courier, monospace;">Cadastro</h1>
    </div>
    <div class="mt-5 container">
    <form class="row g-2" id="formCadastro">
        <div class="col-md-6">
        <label for="nome" class="form-label">Nome:</label>
        <input type="text" class="form-control" id="nome" required>
        </div>
        <div class="col-md-6">
        <label for="sobrenome" class="form-label">Sobrenome:</label>
        <input type="text" class="form-control" id="sobrenome" required>
        </div>
        <div class="col-12">
        <label for="email" class="form-label">Email:</label>
        <input type="email" class="form-control" id="email">
        </div>
        <div class="col-md-6">
        <label for="senha" class="form-label">Crie uma Senha:</label>
        <input type="password" class="form-control" id="senha">
        </div>
        <div class="col-md-6">
        <label for="senha" class="form-label">Confirme a Senha:</label>
        <input type="password" class="form-control" id="senha">
        </div>
        <div class="col-md-2">
        <label for="cep" class="form-label">Cep:</label>
        <input type="text" class="form-control" id="cep" required onblur="buscarCep()">
        </div>
        <div class="col-md-6">
        <label for="endereco" class="form-label">Endereço:</label>
        <input type="text" class="form-control" id="endereco" required>
        </div>
        <div class="col-md-4">
        <label for="bairro" class="form-label">Bairro:</label>
        <input type="text" class="form-control" id="bairro" required>
        </div>
        
        <div class="col-md-6">
        <label for="cidade" class="form-label">Cidade:</label>
        <input type="text" class="form-control" id="cidade">
        </div>
        <div class="col-md-6">
        <label for="estado" class="form-label">Estado:</label>
        <input type="text" class="form-control" id="estado">
        </div>
        <div>
        <p>Já tem uma conta? <a href="login.html">Fazer login</a></p>
        </div>
        <div class="mt-4">
            <button type="submit" class="btn btn-outline-info">Salvar</button>
            <a href="clientes.html" class="btn btn-outline-info ms-1">Ver Clientes</a>
        </div>
    </form>
    </div>
   
    <footer class="text-center text-black mt-5" style="background-color: #e3f2fd; padding: 20px;font-family: 'Courier New', Courier, monospace;">
        <p style="margin: 0;">&copy; 2025 Floricultura - Todos os direitos reservados.</p>
        <div class="mt-2">
            <a href="sobre.html" class="text-dark me-3">Sobre Nós</a>
            <a href="ajuda.html" class="text-dark me-3">Contato</a>
            <a href="politica.html" class="text-dark">Política de Privacidade</a>
        </div>
        <div class="mt-2">
            <a href="#" class="text-dark me-2"><i class="bi bi-facebook"></i></a>
            <a href="#" class="text-dark me-2"><i class="bi bi-instagram"></i></a>
            <a href="#" class="text-dark me-2"><i class="bi bi-twitter"></i></a>
        </div>
    </footer>

    <script>

    const params = new URLSearchParams(window.location.search);
    const meuParametro = params.get('id');

        function buscarCep() {
            var cep = document.getElementById('cep').value
                if(cep.length === 8){ //LENGTH 
            fetch(`http://viacep.com.br/ws/${cep}/json/`)
            .then(response => response.json())
            .then(data => {
                if(!data.erro){
                document.getElementById('endereco').value = data.logradouro
                document.getElementById('bairro').value = data.bairro
                document.getElementById('cidade').value = data.localidade
                document.getElementById('estado').value = data.uf
    
        }
    })
    .catch(error => console.error('Erro ao buscar CEP',error))
    }
        }
        document.addEventListener('DOMContentLoaded', function () {
        const params = new URLSearchParams(window.location.search)
        const clienteId = params.get('id')

    if (clienteId) {
        const clientes = JSON.parse(localStorage.getItem('clientes')) || []
        const cliente = clientes.find(c => c.id == clienteId)

        if (cliente) {
            document.getElementById('nome').value = cliente.nome
            document.getElementById('sobrenome').value = cliente.sobrenome
            document.getElementById('email').value = cliente.email
            document.getElementById('senha').value = cliente.senha
            document.getElementById('cep').value = cliente.cep
            document.getElementById('endereco').value = cliente.endereco
            document.getElementById('bairro').value = cliente.bairro
            document.getElementById('cidade').value = cliente.cidade
            document.getElementById('estado').value = cliente.estado
        }
    }
    document.getElementById('formCadastro').addEventListener('submit', function (event) {
    event.preventDefault()

    const nome = document.getElementById('nome').value
    const sobrenome = document.getElementById('sobrenome').value
    const email = document.getElementById('email').value
    const senha = document.getElementById('senha').value
    const cep = document.getElementById('cep').value
    const endereco = document.getElementById('endereco').value
    const bairro = document.getElementById('bairro').value
    const cidade = document.getElementById('cidade').value
    const estado = document.getElementById('estado').value

    let clientes = JSON.parse(localStorage.getItem('clientes')) || []

    if (clienteId) {
        const index = clientes.findIndex(c => c.id == clienteId)
        if (index !== -1) {
            clientes[index] = { id: clienteId, nome, sobrenome, email, cep, senha, endereco, bairro, cidade, estado }
        }
    } else {
        clientes.push({ id: Date.now(), nome, sobrenome, email, senha, cep, endereco, bairro, cidade, estado })
    }
    localStorage.setItem('clientes', JSON.stringify(clientes))
    alert(clienteId ? 'Cliente atualizado com sucesso!' : 'Cliente cadastrado com sucesso!')

    // Limpa os campos do formulário após o cadastro
    document.getElementById('formCadastro').reset();
});
});

    </script>
</body>
</html>
